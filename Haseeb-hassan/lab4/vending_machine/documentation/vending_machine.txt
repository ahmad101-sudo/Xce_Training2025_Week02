----------------------------------------------------------------------------------------
Truth Table (simplified for states vs inputs)

Here’s the core state table (only showing main cases):
----------------------------------------------------------------------------------------
| Current State | Coin Inserted | Next State  | Dispense | Change Returned    |
| ------------- | ------------- | ----------- | -------- | ------------------ |
| S0            | 5¢            | S5          | 0        | 0                  |
| S0            | 10¢           | S10         | 0        | 0                  |
| S0            | 25¢           | S25         | 0        | 0                  |
| S5            | 25¢           | S30         | 0        | 0                  |
| S10           | 25¢           | S\_Dispense | 1        | 5¢                 |
| S15           | 25¢           | S\_Dispense | 1        | 10¢                |
| S20           | 25¢           | S\_Dispense | 1        | 15¢                |
| S25           | 10¢           | S\_Dispense | 1        | 5¢                 |
| Any           | Coin Return   | S0          | 0        | All inserted coins |
----------------------------------------------------------------------------------------
signal description
---------------------------------------------------------------------------------------

| **Signal**       | **Direction** | **Width** | **Description**                                                           |
| ---------------- | ------------- | --------- | ------------------------------------------------------------------------- |
| `clk`            | Input         | 1 bit     | System clock used to synchronize state transitions.                       |
| `rst_n`          | Input         | 1 bit     | Active-low reset; when `0`, machine goes to `S0` (idle, no credit).       |
| `coin_5`         | Input         | 1 bit     | High (`1`) when a 5¢ coin is inserted.                                    |
| `coin_10`        | Input         | 1 bit     | High (`1`) when a 10¢ coin is inserted.                                   |
| `coin_25`        | Input         | 1 bit     | High (`1`) when a 25¢ coin is inserted.                                   |
| `coin_return`    | Input         | 1 bit     | When `1`, returns all coins inserted so far, resets machine to `S0`.      |
| `dispense`       | Output        | 1 bit     | High (`1`) when an item is dispensed (purchase successful).               |
| `amount_display` | Output        | 6 bits    | Shows the total amount inserted (0–63, in cents). Drives the LED display. |
| `return_5`       | Output        | 1 bit     | High when machine returns a 5¢ coin.                                      |
| `return_10`      | Output        | 2 bits    | Encoded number of 10¢ coins returned (`01`=1 coin, `10`=2 coins).         |
| `return_25`      | Output        | 1 bit     | High when machine returns a 25¢ coin.                                     |
| `current_state`  | Internal      | 3 bits    | FSM state register, stores the present state of the machine.              |
| `next_state`     | Internal      | 3 bits    | FSM next-state logic result, decides transition based on inputs.          |
| `paid_amount`    | Internal      | 6 bits    | Stores the total paid amount to calculate change during dispense.         |
-------------------------------------------------------------------------------------------------------------------
state transition table
-------------------------------------------------------------------------------------------------------------------
| **Present State** | **Input (coin\_5, coin\_10, coin\_25, coin\_return)** | **Next State**                 | **Outputs (dispense, amount\_display, change signals)**             |
| ----------------- | ----------------------------------------------------- | ------------------------------ | ------------------------------------------------------------------- |
| **S0** (0¢)       | coin\_5=1                                             | S5                             | `dispense=0`, `amount_display=5`                                    |
|                   | coin\_10=1                                            | S10                            | `dispense=0`, `amount_display=10`                                   |
|                   | coin\_25=1                                            | S25                            | `dispense=0`, `amount_display=25`                                   |
|                   | coin\_return=1                                        | S0                             | `return_5/10/25=0` (no coins yet)                                   |
| **S5** (5¢)       | coin\_5=1                                             | S10                            | `amount_display=10`                                                 |
|                   | coin\_10=1                                            | S15                            | `amount_display=15`                                                 |
|                   | coin\_25=1                                            | S30                            | `dispense=1`, `change=0`                                            |
|                   | coin\_return=1                                        | S0                             | `return_5=1`                                                        |
| **S10** (10¢)     | coin\_5=1                                             | S15                            | `amount_display=15`                                                 |
|                   | coin\_10=1                                            | S20                            | `amount_display=20`                                                 |
|                   | coin\_25=1                                            | S30                            | `dispense=1`, `return_5=1` (since 35¢ inserted, return 5¢)          |
|                   | coin\_return=1                                        | S0                             | `return_10=1`                                                       |
| **S15** (15¢)     | coin\_5=1                                             | S20                            | `amount_display=20`                                                 |
|                   | coin\_10=1                                            | S25                            | `amount_display=25`                                                 |
|                   | coin\_25=1                                            | S30                            | `dispense=1`, `return_10=1` (since 40¢, return 10¢)                 |
|                   | coin\_return=1                                        | S0                             | `return_5=1, return_10=1`                                           |
| **S20** (20¢)     | coin\_5=1                                             | S25                            | `amount_display=25`                                                 |
|                   | coin\_10=1                                            | S30                            | `dispense=1`, `change=0`                                            |
|                   | coin\_25=1                                            | S30                            | `dispense=1`, `return_15` (change: 15¢ → `return_10=1, return_5=1`) |
|                   | coin\_return=1                                        | S0                             | `return_10=2`                                                       |
| **S25** (25¢)     | coin\_5=1                                             | S30                            | `dispense=1`, `change=0`                                            |
|                   | coin\_10=1                                            | S30                            | `dispense=1`, `return_5=1`                                          |
|                   | coin\_25=1                                            | S30                            | `dispense=1`, `return_20` (change: 20¢ → `return_10=2`)             |
|                   | coin\_return=1                                        | S0                             | `return_25=1`                                                       |
| **S30** (≥30¢)    | –                                                     | S0 (auto-reset after dispense) | `dispense=1`, return extra change if any                            |
